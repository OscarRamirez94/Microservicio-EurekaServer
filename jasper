import net.sf.jasperreports.engine.*;
import net.sf.jasperreports.engine.util.JRSaver;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;

public class JasperCompileExample {

    public static void main(String[] args) {
        try {
            // 1️⃣ Ruta del JRXML de origen (desde C:\)
            String jrxmlPath = "C:\\report_template.jrxml";
            File jrxmlFile = new File(jrxmlPath);
            if (!jrxmlFile.exists()) {
                System.out.println("No se encontró el archivo JRXML: " + jrxmlPath);
                return;
            }

            // Abrir InputStream del JRXML
            InputStream jrxmlInput = new FileInputStream(jrxmlFile);

            // 2️⃣ Compilar el JRXML en memoria
            JasperReport jasperReport = JasperCompileManager.compileReport(jrxmlInput);

            // 3️⃣ Ruta de salida para el .jasper compilado
            String jasperPath = "C:\\report_template.jasper";

            // Guardar el .jasper en disco
            JRSaver.saveObject(jasperReport, jasperPath);

            System.out.println("Reporte compilado correctamente en: " + jasperPath);

        } catch (JRException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}